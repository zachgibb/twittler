<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
    <script src="moment.js"></script>
    <script>

      $(document).ready(function(){
        var $body = $('main');
        displayTweets = function (user) {
          $body.empty();
          var display = user == undefined ? streams.home : streams.users[user];
          var index = display.length - 1;
          while(index >= 0){
            var tweet = display[index];
            var $tweet = $('<p></p>');
            $tweet.html('<a class="user" href="#">' + tweet.user + '</a>: ' + tweet.message +" <br><i>" + moment(tweet.created_at).fromNow() + "</i>");
            $tweet.appendTo($body);
            index -= 1;
          }
        }
        displayTweets();
        $('.refresh').on('click',function(){
          displayTweets();
        });
        $('main').on('click', 'a.user', function(){
          var user = $(this).text();
          displayTweets(user);
        });
      });
      
    </script>
  </head>
  <body>

    <main>
    </main>
    <a href="#" class="refresh">Click for New Tweets</a>
  </body>
</html>
